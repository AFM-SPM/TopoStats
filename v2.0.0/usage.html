
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Usage &#8212; TopoStats 2.3.2.dev596+g13ec2e9a2 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=2b4ec01c" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="_static/jquery.js?v=5d32c60e"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="_static/documentation_options.js?v=a6dcfaca"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'usage';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Configuration" href="configuration.html" />
    <link rel="prev" title="Installation" href="installation.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">TopoStats 2.3.2.dev596+g13ec2e9a2 documentation</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="introduction.html">
    Introduction
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="installation.html">
    Installation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="#">
    Usage
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="configuration.html">
    Configuration
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="contributing.html">
    Contributing
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="workflow.html">
    Workflow
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="data_dictionary.html">
    Data Dictionary
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="related_software.html">
    Related Software
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="topostats.filters.html">
    filters
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="topostats.grains.html">
    grains
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="topostats.grainstats.html">
    grainstats
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="topostats.io.html">
    io
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="topostats.plottingfuncs.html">
    plottingfuncs
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="topostats.run_topostats.html">
    run_topostats
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="topostats.tracing.html">
    tracing
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="topostats.utils.html">
    utils
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="autoapi/index.html">
    API Reference
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="introduction.html">
    Introduction
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="installation.html">
    Installation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="#">
    Usage
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="configuration.html">
    Configuration
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="contributing.html">
    Contributing
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="workflow.html">
    Workflow
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="data_dictionary.html">
    Data Dictionary
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="related_software.html">
    Related Software
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="topostats.filters.html">
    filters
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="topostats.grains.html">
    grains
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="topostats.grainstats.html">
    grainstats
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="topostats.io.html">
    io
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="topostats.plottingfuncs.html">
    plottingfuncs
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="topostats.run_topostats.html">
    run_topostats
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="topostats.tracing.html">
    tracing
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="topostats.utils.html">
    utils
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="autoapi/index.html">
    API Reference
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<h3>Versions</h3>
<ul>
  <li><a href="usage.html">v2.0.0</a></li>
  <li><a href="../v2.1.0/usage.html">v2.1.0</a></li>
  <li><a href="../v2.1.1/usage.html">v2.1.1</a></li>
  <li><a href="../v2.1.2/usage.html">v2.1.2</a></li>
  <li><a href="../v2.2.0/usage.html">v2.2.0</a></li>
  <li><a href="../v2.2.1/usage.html">v2.2.1</a></li>
  <li><a href="../v2.2.post0/usage.html">v2.2.post0</a></li>
  <li><a href="../v2.3.0/usage.html">v2.3.0</a></li>
  <li><a href="../v2.3.1/usage.html">v2.3.1</a></li>
  <li><a href="../main/usage.html">main</a></li>
</ul>
</div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Usage</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Link to this heading">#</a></h1>
<p>After having <a class="reference internal" href="installation.html"><span class="doc std std-doc">installed</span></a> TopoStats you are ready to run it. For convenience TopoStats provides a command
line interface <code class="docutils literal notranslate"><span class="pre">run_topostats</span></code> that will load a default configuration file and process all images with reasonable
default configuration options.</p>
<p>However, because the location of your image files can not be known in advance you must make a copy of the default
configuration and modify it to work with your files. This guide will hopefully take you through the process of running
TopoStats and customising the configuration file with which it is run. If you encounter any problems please ask
questions in the <a class="reference external" href="https://github.com/AFM-SPM/TopoStats/discussions">Discussions</a>. If you think you have encountered a
bug or have a feature suggestion please create an <a class="reference external" href="https://github.com/AFM-SPM/TopoStats/issues">Issue</a>.</p>
<section id="organising-scans">
<h2>Organising Scans<a class="headerlink" href="#organising-scans" title="Link to this heading">#</a></h2>
<p>You should place all files you wish to batch process in a single directory. They can be nested in separate folders as
TopoStats will scan for all images within this directory but currently it will only process one scan type at a time
(i.e. <code class="docutils literal notranslate"><span class="pre">.spm</span></code> <em>or</em> <code class="docutils literal notranslate"><span class="pre">.jpk</span></code> <em>or</em> <code class="docutils literal notranslate"><span class="pre">.asd</span></code>). This may change in the future.</p>
</section>
<section id="running-topostats">
<h2>Running TopoStats<a class="headerlink" href="#running-topostats" title="Link to this heading">#</a></h2>
<p>The default location that TopoStats looks for scans is the directory from which it is invoked. Once you start your
shell/terminal you will therefore need to do two things.</p>
<ol class="arabic simple">
<li><p>Navigate to the location of the scans you wish to process using <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">/path/to/where/scans/are/located</span></code>.</p></li>
<li><p>Activate the virtual environment under which you installed TopoStats (refer to <a class="reference internal" href="installation.html"><span class="doc std std-doc">installed</span></a> if unsure).</p></li>
</ol>
<p>You can now run topostats by invoking <code class="docutils literal notranslate"><span class="pre">run_topostats</span></code> and you should start to see some output similar to that below.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/path/to/where/scans/are/located
run_topostats
<span class="o">[</span>Tue,<span class="w"> </span><span class="m">15</span><span class="w"> </span>Nov<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">12</span>:39:48<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span><span class="o">[</span>topostats<span class="o">]</span><span class="w"> </span>Configuration<span class="w"> </span>is<span class="w"> </span>valid.
<span class="o">[</span>Tue,<span class="w"> </span><span class="m">15</span><span class="w"> </span>Nov<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">12</span>:39:48<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span><span class="o">[</span>topostats<span class="o">]</span><span class="w"> </span>Plotting<span class="w"> </span>configuration<span class="w"> </span>is<span class="w"> </span>valid.
<span class="o">[</span>Tue,<span class="w"> </span><span class="m">15</span><span class="w"> </span>Nov<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">12</span>:39:48<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span><span class="o">[</span>topostats<span class="o">]</span><span class="w"> </span>Configuration<span class="w"> </span>file<span class="w"> </span>loaded<span class="w"> </span>from<span class="w">      </span>:<span class="w"> </span>None
<span class="o">[</span>Tue,<span class="w"> </span><span class="m">15</span><span class="w"> </span>Nov<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">12</span>:39:48<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span><span class="o">[</span>topostats<span class="o">]</span><span class="w"> </span>Scanning<span class="w"> </span><span class="k">for</span><span class="w"> </span>images<span class="w"> </span><span class="k">in</span><span class="w">              </span>:<span class="w"> </span>/home/neil/work/projects/topostats/TopoStats
<span class="o">[</span>Tue,<span class="w"> </span><span class="m">15</span><span class="w"> </span>Nov<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">12</span>:39:48<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span><span class="o">[</span>topostats<span class="o">]</span><span class="w"> </span>Output<span class="w"> </span>directory<span class="w">                    </span>:<span class="w"> </span>output
<span class="o">[</span>Tue,<span class="w"> </span><span class="m">15</span><span class="w"> </span>Nov<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">12</span>:39:48<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span><span class="o">[</span>topostats<span class="o">]</span><span class="w"> </span>Looking<span class="w"> </span><span class="k">for</span><span class="w"> </span>images<span class="w"> </span>with<span class="w"> </span>extension<span class="w">   </span>:<span class="w"> </span>.spm
<span class="o">[</span>Tue,<span class="w"> </span><span class="m">15</span><span class="w"> </span>Nov<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">12</span>:39:48<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span><span class="o">[</span>topostats<span class="o">]</span><span class="w"> </span>Images<span class="w"> </span>with<span class="w"> </span>extension<span class="w"> </span>.spm<span class="w"> </span><span class="k">in</span><span class="w"> </span>/home/neil/work/projects/topostats/TopoStats<span class="w"> </span>:<span class="w"> </span><span class="m">32</span>
<span class="o">[</span>Tue,<span class="w"> </span><span class="m">15</span><span class="w"> </span>Nov<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">12</span>:39:48<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span><span class="o">[</span>topostats<span class="o">]</span><span class="w"> </span>Thresholding<span class="w"> </span>method<span class="w"> </span><span class="o">(</span>Filtering<span class="o">)</span><span class="w">     </span>:<span class="w"> </span>std_dev
<span class="o">[</span>Tue,<span class="w"> </span><span class="m">15</span><span class="w"> </span>Nov<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">12</span>:39:48<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span><span class="o">[</span>topostats<span class="o">]</span><span class="w"> </span>Thresholding<span class="w"> </span>method<span class="w"> </span><span class="o">(</span>Grains<span class="o">)</span><span class="w">        </span>:<span class="w"> </span>std_dev
...
</pre></div>
</div>
</section>
<section id="configuring-topostats">
<h2>Configuring TopoStats<a class="headerlink" href="#configuring-topostats" title="Link to this heading">#</a></h2>
<p>Configuration of TopoStats is done through a <a class="reference external" href="https://yuaml.org/">YAML</a> file and a full description of the fields used
can be found under the <a class="reference internal" href="configuration.html"><span class="doc std std-doc">configuration</span></a> section.</p>
<p>Here we will go through common changes that you are likely to want to make to the default configuration and how to make
them.</p>
<section id="copying-default-config-yaml">
<h3>Copying <code class="docutils literal notranslate"><span class="pre">default_config.yaml</span></code><a class="headerlink" href="#copying-default-config-yaml" title="Link to this heading">#</a></h3>
<p>If you have used Git to clone the TopoStats repository from GitHub the default configuration can be found in the
sub-directory <code class="docutils literal notranslate"><span class="pre">topostats/default_config.yaml</span></code>. If you have installed TopoStats from PyPI then a sample configuration
file can be downloaded from
<a class="reference external" href="https://raw.githubusercontent.com/AFM-SPM/TopoStats/main/topostats/default_config.yaml">here</a> (right-click on the link
and select <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">As</span></code> to save the file to your computer).</p>
<p>Save or copy this file to the same directory all of your scan files are located and call it <code class="docutils literal notranslate"><span class="pre">my_config.yaml</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>/&lt;path&gt;/&lt;to&gt;/&lt;where&gt;/&lt;topostats&gt;/&lt;is&gt;/&lt;cloned&gt;/TopoStats/topostats/default_config.yaml<span class="w"> </span>/&lt;where&gt;/&lt;scans&gt;/&lt;are&gt;/my_config.yaml
</pre></div>
</div>
</section>
<section id="editing-my-config-yaml">
<h3>Editing <code class="docutils literal notranslate"><span class="pre">my_config.yaml</span></code><a class="headerlink" href="#editing-my-config-yaml" title="Link to this heading">#</a></h3>
<p><strong>IMPORTANT</strong> This file is an ASCII text file and  you should use NotePad (Windows), TextEdit (OSX) or Nano/Emacs/Vim
(GNU/Linux) or any other text editor. Do <em>not</em> use Microsoft Word or any other Word Processor to edit this file.</p>
<p>You can now start customising the configuration you are going to run TopoStats with. All fields have defaults but the
ones you may want to change are….</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">base_dir</span></code> (default: <code class="docutils literal notranslate"><span class="pre">./</span></code>) the directory in which to search for scans. By default this is <code class="docutils literal notranslate"><span class="pre">./</span></code> which represents the
directory from which <code class="docutils literal notranslate"><span class="pre">run_topostats</span></code> is called and it is good practice to have one configuration file per batch of
scans that are being processed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output_dir</span></code> (default: <code class="docutils literal notranslate"><span class="pre">output</span></code>) the location where the output is saved, by default this is the directory <code class="docutils literal notranslate"><span class="pre">output</span></code>
which will be   created if it doesn’t exist. If you wish for the output to be somewhere else specify it here. If you
want <code class="docutils literal notranslate"><span class="pre">Processed</span></code> directories to sit within the directories that images are found then simply set the <code class="docutils literal notranslate"><span class="pre">output_dir</span></code> to
the same value as <code class="docutils literal notranslate"><span class="pre">base_dir</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cores</span></code> (default: <code class="docutils literal notranslate"><span class="pre">4</span></code>) the number of parallel processes to run processing of all found images. Set this to a maximum
of one less than the number of cores on your computers CPU. If unsure leave as is.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">file_ext</span></code> (default: <code class="docutils literal notranslate"><span class="pre">.spm</span></code>) the file extension of scans to search for within the current directory. The default is
<code class="docutils literal notranslate"><span class="pre">.spm</span></code> but other file format support is in the pipeline.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plotting</span></code> : <code class="docutils literal notranslate"><span class="pre">image_set</span></code> (default <code class="docutils literal notranslate"><span class="pre">core</span></code>) specifies which steps of the processing to plot images of. The value <code class="docutils literal notranslate"><span class="pre">all</span></code>
gets images for all stages, `core** saves only a subset of images.</p></li>
</ul>
<p>Most of the other configuration options can be left on their default values for now. Once you have made any changes save
the file and return to your terminal.</p>
</section>
<section id="running-topostats-with-my-config-yaml">
<h3>Running TopoStats with <code class="docutils literal notranslate"><span class="pre">my_config.yaml</span></code><a class="headerlink" href="#running-topostats-with-my-config-yaml" title="Link to this heading">#</a></h3>
<p>To use your new configuration file you need to inform <code class="docutils literal notranslate"><span class="pre">run_topostats</span></code> to use that file rather than the defaults, this is
done using the <code class="docutils literal notranslate"><span class="pre">--config</span> <span class="pre">my_config.yaml</span></code> file.</p>
<p><strong>NB</strong> this assumes that you are in the same directory as your scans where you have saved the <code class="docutils literal notranslate"><span class="pre">my_config.yaml</span></code> file that
you edited. That doesn’t <em>have</em> to be the case but it makes life easier for if you are not familiar with absolute
and relative paths.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>run_topostats<span class="w"> </span>--config<span class="w"> </span>my_configy.yaml
<span class="o">[</span>Tue,<span class="w"> </span><span class="m">15</span><span class="w"> </span>Nov<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">12</span>:39:48<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span><span class="o">[</span>topostats<span class="o">]</span><span class="w"> </span>Configuration<span class="w"> </span>is<span class="w"> </span>valid.
<span class="o">[</span>Tue,<span class="w"> </span><span class="m">15</span><span class="w"> </span>Nov<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">12</span>:39:48<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span><span class="o">[</span>topostats<span class="o">]</span><span class="w"> </span>Plotting<span class="w"> </span>configuration<span class="w"> </span>is<span class="w"> </span>valid.
<span class="o">[</span>Tue,<span class="w"> </span><span class="m">15</span><span class="w"> </span>Nov<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">12</span>:39:48<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span><span class="o">[</span>topostats<span class="o">]</span><span class="w"> </span>Configuration<span class="w"> </span>file<span class="w"> </span>loaded<span class="w"> </span>from<span class="w">      </span>:<span class="w"> </span>None
<span class="o">[</span>Tue,<span class="w"> </span><span class="m">15</span><span class="w"> </span>Nov<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">12</span>:39:48<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span><span class="o">[</span>topostats<span class="o">]</span><span class="w"> </span>Scanning<span class="w"> </span><span class="k">for</span><span class="w"> </span>images<span class="w"> </span><span class="k">in</span><span class="w">              </span>:<span class="w"> </span>/home/neil/work/projects/topostats/TopoStats
<span class="o">[</span>Tue,<span class="w"> </span><span class="m">15</span><span class="w"> </span>Nov<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">12</span>:39:48<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span><span class="o">[</span>topostats<span class="o">]</span><span class="w"> </span>Output<span class="w"> </span>directory<span class="w">                    </span>:<span class="w"> </span>output
<span class="o">[</span>Tue,<span class="w"> </span><span class="m">15</span><span class="w"> </span>Nov<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">12</span>:39:48<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span><span class="o">[</span>topostats<span class="o">]</span><span class="w"> </span>Looking<span class="w"> </span><span class="k">for</span><span class="w"> </span>images<span class="w"> </span>with<span class="w"> </span>extension<span class="w">   </span>:<span class="w"> </span>.spm
<span class="o">[</span>Tue,<span class="w"> </span><span class="m">15</span><span class="w"> </span>Nov<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">12</span>:39:48<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span><span class="o">[</span>topostats<span class="o">]</span><span class="w"> </span>Images<span class="w"> </span>with<span class="w"> </span>extension<span class="w"> </span>.spm<span class="w"> </span><span class="k">in</span><span class="w"> </span>/home/neil/work/projects/topostats/TopoStats<span class="w"> </span>:<span class="w"> </span><span class="m">1</span>
<span class="o">[</span>Tue,<span class="w"> </span><span class="m">15</span><span class="w"> </span>Nov<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">12</span>:39:48<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span><span class="o">[</span>topostats<span class="o">]</span><span class="w"> </span>Thresholding<span class="w"> </span>method<span class="w"> </span><span class="o">(</span>Filtering<span class="o">)</span><span class="w">     </span>:<span class="w"> </span>std_dev
<span class="o">[</span>Tue,<span class="w"> </span><span class="m">15</span><span class="w"> </span>Nov<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">12</span>:39:48<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span><span class="o">[</span>topostats<span class="o">]</span><span class="w"> </span>Thresholding<span class="w"> </span>method<span class="w"> </span><span class="o">(</span>Grains<span class="o">)</span><span class="w">        </span>:<span class="w"> </span>std_dev
...
</pre></div>
</div>
<p>On a successful completion you should see output similar to this at the bottom.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Processing<span class="w"> </span>images<span class="w"> </span>from<span class="w"> </span>tests,<span class="w"> </span>results<span class="w"> </span>are<span class="w"> </span>under<span class="w"> </span>output:<span class="w"> </span><span class="m">100</span>%<span class="p">|</span>XXXXXXXXXXXXXXXX<span class="p">|</span><span class="w"> </span><span class="m">1</span>/1<span class="w"> </span><span class="o">[</span><span class="m">00</span>:03&lt;<span class="m">00</span>:00,<span class="w">  </span><span class="m">3</span>.60s/it<span class="o">][</span>Tue,<span class="w"> </span><span class="m">15</span><span class="w"> </span>Nov<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">13</span>:49:14<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span><span class="o">[</span>topostats<span class="o">]</span><span class="w"> </span>All<span class="w"> </span>statistics<span class="w"> </span>combined<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>images<span class="o">(</span>s<span class="o">)</span><span class="w"> </span>are<span class="w"> </span>saved<span class="w"> </span>to<span class="w"> </span>:<span class="w"> </span>output/all_statistics.csv<span class="o">}</span>
<span class="o">[</span>Tue,<span class="w"> </span><span class="m">15</span><span class="w"> </span>Nov<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">13</span>:49:14<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span><span class="o">[</span>topostats<span class="o">]</span><span class="w"> </span>Unable<span class="w"> </span>to<span class="w"> </span>generate<span class="w"> </span>folderwise<span class="w"> </span>statistics<span class="w"> </span>as<span class="w"> </span><span class="s1">&#39;all_statis_df&#39;</span><span class="w"> </span>is<span class="w"> </span>empty
<span class="o">[</span>Tue,<span class="w"> </span><span class="m">15</span><span class="w"> </span>Nov<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">13</span>:49:14<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span><span class="o">[</span>topostats<span class="o">]</span><span class="w"> </span>Writing<span class="w"> </span>configuration<span class="w"> </span>to<span class="w"> </span>:<span class="w"> </span>output/config.yaml
</pre></div>
</div>
</section>
</section>
<section id="output">
<h2>Output<a class="headerlink" href="#output" title="Link to this heading">#</a></h2>
<p>The output from running TopoStats is saved in the location defined in the configuration file by <code class="docutils literal notranslate"><span class="pre">output_dir</span></code>. The
default is the directory <code class="docutils literal notranslate"><span class="pre">output</span></code> within the directory from which <code class="docutils literal notranslate"><span class="pre">run_topostats</span></code> is invoked unless it has been modified
in a copy of the default configuration as described above.</p>
<p>At the top level of the output directory are two files <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> and <code class="docutils literal notranslate"><span class="pre">all_statistics.csv</span></code></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> : a copy of the configuration used to process the images.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">all_statistics.csv</span></code> : a Comma Separated Variable ASCII plain-text file of the grain and DNA tracing statistics.</p></li>
</ul>
<p>The remaining directories of results is contingent on the structure of files within the <code class="docutils literal notranslate"><span class="pre">base_dir</span></code> that is specified in
the configuration. If all files are in the top-level directory (i.e. no nesting) then you will have just a <code class="docutils literal notranslate"><span class="pre">Processed</span></code>
directory. If there is a nested structure then there will be a <code class="docutils literal notranslate"><span class="pre">Processed</span></code> directory in each folder that an image with
the specified <code class="docutils literal notranslate"><span class="pre">file_ext</span></code> has been found. This is perhaps best illustrated by way of example.</p>
<p>If you have the following three <code class="docutils literal notranslate"><span class="pre">.spm</span></code> files within your current directory, one at the top level, one under <code class="docutils literal notranslate"><span class="pre">level1</span></code> and
one under <code class="docutils literal notranslate"><span class="pre">level1/a</span></code>…</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="m">4</span>.0K<span class="w"> </span>Nov<span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">13</span>:55<span class="o">]</span><span class="w">  </span>.
<span class="p">|</span>--<span class="w"> </span><span class="o">[</span><span class="m">4</span>.0K<span class="w"> </span>Nov<span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">13</span>:54<span class="o">]</span><span class="w">  </span>./level1
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span><span class="o">[</span><span class="m">4</span>.0K<span class="w"> </span>Nov<span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">13</span>:54<span class="o">]</span><span class="w">  </span>./level1/a
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span><span class="o">[</span><span class="w"> </span>32M<span class="w"> </span>Nov<span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">13</span>:54<span class="o">]</span><span class="w">  </span>./level1/a/minicircle.spm
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span><span class="o">[</span><span class="w"> </span>32M<span class="w"> </span>Nov<span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">13</span>:54<span class="o">]</span><span class="w">  </span>./level1/minicircle.spm
<span class="p">|</span>--<span class="w"> </span><span class="o">[</span><span class="w"> </span>32M<span class="w"> </span>Nov<span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">13</span>:54<span class="o">]</span><span class="w">  </span>./minicircle.spm
</pre></div>
</div>
<p>…then under <code class="docutils literal notranslate"><span class="pre">output</span></code> (the default for<code class="docutils literal notranslate"><span class="pre">output_dir</span></code>) you will see the following directory structure.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="m">4</span>.0K<span class="w"> </span>Nov<span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">14</span>:06<span class="o">]</span><span class="w">  </span>output
<span class="p">|</span>--<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="m">381</span><span class="w"> </span>Nov<span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">14</span>:06<span class="o">]</span><span class="w">  </span>output/all_statistics.csv
<span class="p">|</span>--<span class="w"> </span><span class="o">[</span><span class="m">7</span>.4K<span class="w"> </span>Nov<span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">14</span>:06<span class="o">]</span><span class="w">  </span>output/config.yaml
<span class="p">|</span>--<span class="w"> </span><span class="o">[</span><span class="m">4</span>.0K<span class="w"> </span>Nov<span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">14</span>:06<span class="o">]</span><span class="w">  </span>output/level1
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span><span class="o">[</span><span class="m">4</span>.0K<span class="w"> </span>Nov<span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">14</span>:06<span class="o">]</span><span class="w">  </span>output/level1/a
<span class="p">|</span><span class="w">   </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span><span class="o">[</span><span class="m">4</span>.0K<span class="w"> </span>Nov<span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">14</span>:06<span class="o">]</span><span class="w">  </span>output/level1/a/Processed
<span class="p">|</span><span class="w">   </span><span class="p">|</span>--<span class="w"> </span><span class="o">[</span><span class="m">4</span>.0K<span class="w"> </span>Nov<span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">14</span>:06<span class="o">]</span><span class="w">  </span>output/level1/Processed
<span class="p">|</span>--<span class="w"> </span><span class="o">[</span><span class="m">4</span>.0K<span class="w"> </span>Nov<span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">14</span>:06<span class="o">]</span><span class="w">  </span>output/Processed
</pre></div>
</div>
<p>…where there is one <code class="docutils literal notranslate"><span class="pre">Processed</span></code> directory at the sub-directory level that each image was found.</p>
<p><strong>NB</strong> If you want <code class="docutils literal notranslate"><span class="pre">Processed</span></code> directories to sit within the directories that images are found then simply set the <code class="docutils literal notranslate"><span class="pre">output_dir</span></code>
to the same value as <code class="docutils literal notranslate"><span class="pre">base_dir</span></code>.</p>
<p>Within each <code class="docutils literal notranslate"><span class="pre">Processed</span></code> directory is a directory for each file found with the specified <code class="docutils literal notranslate"><span class="pre">file_ext</span></code> and within these are
the resulting images from processing scans. If the <code class="docutils literal notranslate"><span class="pre">plotting</span></code> : <code class="docutils literal notranslate"><span class="pre">image_set</span></code> is <code class="docutils literal notranslate"><span class="pre">core</span></code> then there is a single image for
each. If this option is <code class="docutils literal notranslate"><span class="pre">all</span></code> then there is also a sub-directory for each image found within which there are the
directories <code class="docutils literal notranslate"><span class="pre">filters</span></code>, <code class="docutils literal notranslate"><span class="pre">grains/lower</span></code> and <code class="docutils literal notranslate"><span class="pre">grains/upper</span></code> which contain additional images from the processing stages and
an accompanying histogram for each image showing the distribution of pixel heights for that image.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="installation.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Installation</p>
      </div>
    </a>
    <a class="right-next"
       href="configuration.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Configuration</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#organising-scans">Organising Scans</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-topostats">Running TopoStats</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-topostats">Configuring TopoStats</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#copying-default-config-yaml">Copying <code class="docutils literal notranslate"><span class="pre">default_config.yaml</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#editing-my-config-yaml">Editing <code class="docutils literal notranslate"><span class="pre">my_config.yaml</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#running-topostats-with-my-config-yaml">Running TopoStats with <code class="docutils literal notranslate"><span class="pre">my_config.yaml</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#output">Output</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/usage.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2023, TopoStats authors.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>